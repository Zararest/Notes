# Оглавление


# Межпроцедурный анализ

## Базовые концепции 

Граф вызовов - множество узлов и ребер, которым соответствуют процедуры программ и вызовы других процедур. При наличии указателей на функции и виртуальных функций одна точка вызова может соответствовать многим узлам. Для уменьшения количества потенциальных связей в таких точках применяется статическая аппроксимация возможных значений.

Строка вызовов - последовательность вызовов функций, которая привела анализатор в текущую точку. Она необходима напримре для анализа констант, поскольку их значение может зависеть от всех вызовов:

```cpp
for (i = 0; i < n; i++){

    t1 = g(0);
    t2 = g(243);
}

int g(int v){

    return f(v);
}

int f(int v){

    return v + 1;
}
```

Поскольку уровней вложенности произвольно много, применяется к-ограниченный контекстный анализ, где к - размер строки вызовов. При k = 0 анализ контекстно-нечувствительный.

Контекстно-чувствительный анализ на основе клогирования - метод анализа, при которомв каждой точке вызова создается новая независимая процедура с необходимыми параметрами. В этом случае возможно провести контекстно-независимый анализ.

Контекстно-чувствительный анализ на основе резюме - метод, при котором каждая функция характеризуется своим резюме. Оно описывает поведение функции и при анализе использкется уже готовая характеристика. Например при подстановке констант каждая процедура рассматривается как передаточная функция констант. При отсутситвии рекурсии каждую вызванную процедуру можно рассматривать ка вложенную область. Для получания наиболее точных результатов необходимо передавать констьанты вниз по областям. Также существует восходящая передача, которая позволяет строить функцию передачи. 

При наличии рекурсии мы сперва находим наиболее горячую точку графа вызовов и вычисляем все компоненты кроме горячих точек. Затем начинается вычисление сильно связных компонент до тех пор, пока не будет достигнута сходимость(обноаляем передаточные функции до тех пор, пока не лостигнем итерации с отсутствием изменений).

## Datalog
Datalog - язык для выражения логических выводов. Он состоит из атомов и заголовков. Заголовки обозначают производные от атомов и могут учавствовать в произведении других заголовков по правилам.

Заголовок истенен если истино тело.

Программа на этом языке применяется к набору входных данных до тех пор пока не будут сделаны все возможные выводы(истинные правила).

Пример вычисления путей в графе:

        path(X, Y) :- edge(X, Y)
        path(X, Y) :- path(X, Z) & path(Z, X)


По этим правилам и наборам вершин можно найти все пути в графе.

Экстенчиональная база данных - набор предикатов, которые определяются априори.

Интенсиональная база данных - набор выводов по праилам. 

Прдикат может принадлежать только одному из этих двух классов.

Выполнение такой программы заключается в подстановке всевозможных значений входных данных до тех пор пока не перестанут появляться новые правила. В примере с графами на каждом слкдующем шаге будут вычисляться все пути не более 2^(n - 1).

Очевидно, что на новом шаге будет новое предикат из праила, только в том случае, если в нем появится новый истинный предикат на прошлом шаге.

В некоторых случаях может быть выведено бесконечное количестов правил. В этом случае такие программы называются небезопасными(правила в заголовках которых находятся переменные, не появляющиеся в теле таким образом, чтобы онги могли принимать только экстенсивные значения) и нестратифицированные(множество правил, в котором есть рекурсия, включающая отрицание). 

## Контекстно-чувствительный анализ указателей 
Для построения контекстно-чувствительного анализа необходима информация о данных, с которыми работает программа в рассматриваемой точке. Чтобы наложить ограничения на переменные применяются методы клонирования и резюме
- Клонирование - разветвляет граф вызовов при обнаружении условного перехода, тем самым получая граф, в котором рассмотрены все возможные значения данных. (метод представлен исзодным методом и контекстом)
- Резюме - для каждой функции составляется формула, с помощью которой можно вычислить значение переменной в нужной точке.

Для построения таких представлений из графа вызовов удаляются все компоненты сильной связности(рекурсия). Таким образом можно  построить конечнуб строку вызовов.


